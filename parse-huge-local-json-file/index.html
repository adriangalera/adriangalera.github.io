<!DOCTYPE html>
<!--
    Type on Strap jekyll theme v2.4.6
    Theme free for personal and commercial use under the MIT license
    https://github.com/sylhare/Type-on-Strap/blob/master/LICENSE
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=5">

    <!-- Theme Mode-->
    
    <script>
        const isAutoTheme = true;
        document.documentElement.setAttribute('data-theme', sessionStorage.getItem('theme'))
    </script>
    

    <!-- Main JS (navbar.js, katex_init.js and masonry_init.js)-->
    <script defer src="/assets/js/main.min.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!--Favicon-->
    <link rel="shortcut icon" href="/assets/img/avatars/me-100x100.png" type="image/x-icon">

    

    <!-- KaTeX 0.15.2 -->
    
    <script defer src="/assets/js/vendor/katex.min.js"></script>
    <script defer src="/assets/js/vendor/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
    

    <!-- Mermaid 9.1.1 -->
    
    <script defer src="/assets/js/vendor/mermaid.min.js" onload="mermaid.initialize({
      startOnLoad:true,
      theme: 'default',
    });"></script>
    

    <!-- Simple Jekyll Search 1.10.0 -->
    <script src="/assets/js/vendor/simple-jekyll-search.min.js" type="text/javascript"></script>

    <!-- Google Analytics / Cookie Consent -->
    <script>
      const cookieName = 'cookie-notice-dismissed-https://www.agalera.eu';
      const isCookieConsent = 'false';
      const analyticsName = 'UA-126206451-1';
      const analyticsNameGA4 = '';
    </script>

    
    
        <!-- old google analytics -->
        <!--
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-126206451-1"></script>
        <script async src='https://www.google-analytics.com/analytics.js'></script>
        <script>
        // disable GA for localhost
        const isProduction = window.location.host.includes("agalera.eu")
        if (!isProduction) { 
          console.log(`Disabling google analytics for UA-126206451-1`)
          window['ga-disable-UA-126206451-1'] = true;
        }
        </script>
        -->
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-S8VGYBN25C"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'G-S8VGYBN25C');
        </script>        
    

    <!-- seo tags -->
    <meta property="og:image" content="https://www.agalera.eu/assets/img/posts/oboe/featured.png">
    
    <meta property="og:type" content="website" />
    
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Parse huge local json file | Adrian Galera blog</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Parse huge local json file" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="How to parse a huge JSON file only in the browser. This implementation uses an undocumented Oboejs technique to process the file in batches" />
<meta property="og:description" content="How to parse a huge JSON file only in the browser. This implementation uses an undocumented Oboejs technique to process the file in batches" />
<link rel="canonical" href="https://www.agalera.eu/parse-huge-local-json-file/" />
<meta property="og:url" content="https://www.agalera.eu/parse-huge-local-json-file/" />
<meta property="og:site_name" content="Adrian Galera blog" />
<meta property="og:image" content="https://www.agalera.eu/assets/img/posts/oboe/featured.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-03-13T00:00:00-05:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://www.agalera.eu/assets/img/posts/oboe/featured.png" />
<meta property="twitter:title" content="Parse huge local json file" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2019-03-13T00:00:00-05:00","datePublished":"2019-03-13T00:00:00-05:00","description":"How to parse a huge JSON file only in the browser. This implementation uses an undocumented Oboejs technique to process the file in batches","headline":"Parse huge local json file","image":"https://www.agalera.eu/assets/img/posts/oboe/featured.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.agalera.eu/parse-huge-local-json-file/"},"url":"https://www.agalera.eu/parse-huge-local-json-file/"}</script>
<!-- End Jekyll SEO tag -->


    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="Adrian Galera blog" href="https://www.agalera.eu/feed.xml"/>
    <link type="application/atom+xml" rel="alternate" href="https://www.agalera.eu/feed.xml" title="Adrian Galera blog" />

    <!-- Twitter Cards -->
    <meta name="twitter:title" content="Parse huge local json file">
    <meta name="twitter:description" content="I need to provide a UI to analyse the results of a long-running process that generates huge JSON file whose size is in GB order.In the article I will talk ab...">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://www.agalera.eu/assets/img/posts/oboe/featured.png">
    <meta name="twitter:image:alt" content="Parse huge local json file">
</head>

  <body>
    <header class="site-header">

    <!-- Logo and title -->
	<div class="branding">
        
		<a href="/">
			<img alt="logo img" class="avatar" src="/assets/img/avatars/me-100x100.png" loading="lazy"/>
		</a>
        
        <a class="site-title" aria-label="Adrian Galera blog" href="/">
        Adrian Galera blog
		</a>
	</div>

    <!-- Toggle menu -->
    <nav class="clear">
    <a aria-label="pull" id="pull" class="toggle" href="#">
    <i class="fas fa-bars fa-lg"></i>
    </a>

    <!-- Menu -->
    <ul class="hide">
        

        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Search" title="Search" href="/search/">
                     <i class="fas fa-search" aria-hidden="true"></i>
                    
                </a>
            </li>
            
            
        
            
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="Tags" title="Tags" href="/tags/">
                     <i class="fas fa-tags" aria-hidden="true"></i>
                    
                </a>
            </li>
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        

        
        <li class="separator"> | </li>
        <li><a id="theme-toggle" title="Parse huge local json file " aria-label="Parse huge local json file" onclick="themeToggle()"></a></li>
        
    </ul>

	</nav>
</header>

    <div class="content">
      <article class="feature-image" >
  <header id="main" style="">
    <div class="title-padder">
      
      <h1 id="Parse+huge+local+json+file" class="title">Parse huge local json file</h1>
      


<div class="post-info">
    <p class="meta">
      
      
      March 13, 2019
    </p></div>

      
    </div>
  </header>

  <section class="post-content">
  
      <p>I need to provide a UI to analyse the results of a long-running process that generates huge JSON file whose size is in GB order.</p>
<p>In the article I will talk about the solution implemented using the HTML5 FileReader API and the mighty <a href="#using-oboe-js">oboe.js</a> library</p>
<p><!--more--></p>
<p>TL;DR: <a href="#code">The code</a></p>
<p>Thanks to <a href="https://www.html5rocks.com/en/tutorials/file/dndfiles/">HTML5 FileReader API</a> , files can be read locally in the browser without any need for servers. Even better, files can be read in <a href="https://gist.github.com/alediaferia/cfb3a7503039f9278381">chunks</a> in order to keep the memory footprint as low as desired.</p>
<p>If you search in Google about how to parse huge JSON files, eventually the streaming techniques will appear. In the XML world there are two different techniques for parsing files:</p>
<ul>
<li>SAX: Read the XML as events, keeping a little memory footprint</li>
<li>DOM: Read the whole XML in memory allowing easy manipulation</li>
</ul>
<p>Working with JSON the DOM technique is the most used. For instance "JSON.parse" loads the whole string in memory before parsing the JSON. What will happen if the string is really big? The browser will explode.</p>
<p>We need to apply the SAX loading technique to read the big JSON file. In order to achieve that we can use <a href="http://oboejs.com/">Oboejs</a> library:</p>
<blockquote><p>Oboe.js is an <a href="http://oboejs.com/LICENCE">open source</a> Javascript library for loading JSON using streaming, combining the convenience of DOM with the speed and fluidity of SAX.</p></blockquote>
<h5 id="using-oboe-js">Using oboe.js</h5>
<p>Reading the documentation it is not clear if one can use the FileReader API with oboe-js. It clearly says you can pass an URL or a NodeJs stream to its initializer method:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">oboe</span><span class="p">(</span> <span class="nb">String</span> <span class="nx">url</span> <span class="p">)</span>

<span class="nx">oboe</span><span class="p">({</span>
    <span class="na">url</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
    <span class="na">method</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="nb">Object</span><span class="p">,</span>
    <span class="na">body</span><span class="p">:</span> <span class="nb">String</span><span class="o">|</span><span class="nb">Object</span><span class="p">,</span>
    <span class="na">cached</span><span class="p">:</span> <span class="nb">Boolean</span><span class="p">,</span>
    <span class="na">withCredentials</span><span class="p">:</span> <span class="nb">Boolean</span>
<span class="p">})</span>

<span class="nx">oboe</span><span class="p">(</span><span class="nx">stream</span><span class="p">)</span>
</code></pre></div></div>

<p>Searching over the internet I have found this Github <a href="https://github.com/jimhigson/oboe.js/issues/112">issue</a> where it's author is asking for some solution to not using an URL nor NodeJs stream.</p>
<p>So, finally there's a way to combine the power of the FileReader API and the streaming capabilities of oboejs</p>
<h5 id="code">The code</h5>
<p>Since the UI we are building is built in React, I have made this project as a plug-and-play React component:</p>
<p><a href="https://github.com/adriangalera/parse-huge-json">https://github.com/adriangalera/parse-huge-json</a></p>
<p>P.S: The plug-and-play worked like a charm!</p>
<p>&nbsp;</p>

    
  </section>

  <!-- Social media shares -->
  

<div class="share-buttons">
    <ul class="share-buttons">
        <li class="meta">Share</li>
        
        <li>
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.agalera.eu/parse-huge-local-json-file/" target="_blank"
               title=" Facebook">
                <i class="fab fa-facebook-square fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Share on Facebook</span>
            </a>
        </li>
         
        <li>
            <a href="https://twitter.com/intent/tweet?text=Parse+huge+local+json+file%20https%3A%2F%2Fwww.agalera.eu%2Fparse-huge-local-json-file%2F"
               target="_blank" title="">
                <i class="fab fa-twitter-square fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Tweet</span>
            </a>
        </li>
         
        <li>
            <a href="https://www.tumblr.com/share?v=3&u=https://www.agalera.eu/parse-huge-local-json-file/&quote=Parse+huge+local+json+file%20%7C%20Adrian+Galera+blog&s="
               target="_blank" title=" Tumblr">
                <i class="fab fa-tumblr-square fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Share on Tumblr</span>
            </a>
        </li>
         
        <li>
            <a href="https://pinterest.com/pin/create/button/?url=https://www.agalera.eu/parse-huge-local-json-file/&media=https://www.agalera.eu/assets/img/posts/oboe/featured.png$description=I+need+to+provide+a+UI+to+analyse+the+results+of+a+long-running+process+that+generates+huge+JSON+file+whose+size+is+in+GB+order.%0AIn+the+article+I+will+talk+about+the+solution+implemented+using+the+HTML5+FileReader+API+and+the+mighty+oboe.js+library%0A%0A%0A"
               target="_blank" title="">
                <i class="fab fa-pinterest-square fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Pin it</span>
            </a>
        </li>
          
        <li>
            <a href="https://www.reddit.com/submit?url=https://www.agalera.eu/parse-huge-local-json-file/&title=Parse+huge+local+json+file%20%7C%20Adrian+Galera+blog"
               target="_blank" title=" Reddit">
                <i class="fab fa-reddit-square fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Share on Reddit</span>
            </a>
        </li>
         
        <li>
            <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.agalera.eu/parse-huge-local-json-file/&title=Parse+huge+local+json+file%20%7C%20Adrian+Galera+blog&summary=&source=https://www.agalera.eu/parse-huge-local-json-file/"
               target="_blank" title=" LinkedIn">
                <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Share on LinkedIn</span>
            </a>
        </li>
          
        <li>
            <a href="mailto:?subject=Parse huge local json file%20%7C%20Adrian Galera blog&body=https://www.agalera.eu/parse-huge-local-json-file/"
               target="_blank" title="">
                <i class="fas fa-envelope-square fa-2x" aria-hidden="true"></i>
                <span class="sr-only">Email</span></a>
        </li>
        
    </ul>
</div>




   <!-- Tag list -->
  
  


  <div class="tag-list">
    <ul>
      
        <li class="meta">Tags</li>
      

      
        <li><a class="button" href="/tags#frontend">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> frontend</p>
        </a></li>
      
        <li><a class="button" href="/tags#json">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> json</p>
        </a></li>
      
        <li><a class="button" href="/tags#oboejs">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> oboejs</p>
        </a></li>
      
        <li><a class="button" href="/tags#react">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> react</p>
        </a></li>
      
    </ul>
  </div>



</article>

<!-- Post navigation -->

<div id="post-nav">
    
    <div id="previous-post">
        <a alt="Grafana, nginx reverse-proxy and Docker" href="/grafana-nginx-reverse-proxy-docker/">
            <p>Previous post</p>
            Grafana, nginx reverse-proxy and Docker
        </a>
    </div>
    

    
    <div id="next-post">
        <a alt="Relational model in DynamoDB" href="/relational-model-dynamodb/">
            <p>Next post</p>
            Relational model in DynamoDB
        </a>
    </div>
    
</div>



<!--Utterances-->


<!-- Cusdis -->


<!-- Disqus -->


<!-- To change color of links in the page -->
<style>
  header#main {
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
  }

  

  
  header#main { background-image: url('/assets/img/posts/oboe/featured.png'); }
  
</style>

    </div>
    <footer class="site-footer">
    <p class="text">
        </p>
            <div class="footer-icons">
                <ul>
                <!-- Social icons from Font Awesome, if enabled -->
                
<li>
    <a feed.xml href="/feed.xml"
       title="Follow RSS feed"
       target="_blank">
        <span class="fa-stack fa-lg">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
        </span>
    </a>
</li>



    

    

    

    

    

    

    
        
        
        
        
        <li>
            <a href="https://github.com/adriangalera"
               title="Follow on Github"
               target="_blank"
               rel="noopener">
            <span class="fa-stack fa-lg">
              <i class="fas fa-circle fa-stack-2x"></i>
              <i class="fab fa-github fa-stack-1x fa-inverse"></i>
            </span>
            </a>
        </li>
    

    

    

    

    

    

    
        
        
        
        
        <li>
            <a href="https://www.linkedin.com/in/adriangalera"
               title="Follow on Linkedin"
               target="_blank"
               rel="noopener">
            <span class="fa-stack fa-lg">
              <i class="fas fa-circle fa-stack-2x"></i>
              <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
            </span>
            </a>
        </li>
    

    
        
        
        
        
        <li>
            <a href="mailto:adrian.galera.87@gmail.com"
               title="Follow on Mail"
               target="_blank"
               rel="noopener">
            <span class="fa-stack fa-lg">
              <i class="fas fa-circle fa-stack-2x"></i>
              <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
            </span>
            </a>
        </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


                </ul>
            </div>
</footer>



  </body>
</html>
